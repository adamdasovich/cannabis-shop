{"ast":null,"code":"import _regeneratorRuntime from\"C:/Projects/Travasy/proshop/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Projects/Travasy/proshop/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from'axios';import{CART_ADD_ITEM,CART_REMOVE_ITEM,CART_SAVE_SHIPPING_ADDRESS}from'../constants/cartConstants';var api=axios.create({baseURL:\"http://localhost:5000/api/products\"});export var addToCart=function addToCart(id,qty){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch,getState){var _yield$api$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.get(\"/\".concat(id));case 3:_yield$api$get=_context.sent;data=_yield$api$get.data;console.log(data);dispatch({type:CART_ADD_ITEM,payload:{product:data._id,name:data.name,image:data.image,price:data.price,countInStock:data.countInStock,qty:qty}});localStorage.setItem('cartItems',JSON.stringify(getState().cart.cartItems));_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var removeFromCart=function removeFromCart(id){return function(dispatch,getState){dispatch({type:CART_REMOVE_ITEM,payload:id});localStorage.setItem('cartItems',JSON.stringify(getState().cart.cartItems));};};export var saveShippingAddress=function saveShippingAddress(data){return function(dispatch){dispatch({type:CART_SAVE_SHIPPING_ADDRESS,payload:data});localStorage.setItem('shippingAddress',JSON.stringify(data));};};","map":{"version":3,"names":["axios","CART_ADD_ITEM","CART_REMOVE_ITEM","CART_SAVE_SHIPPING_ADDRESS","api","create","baseURL","addToCart","id","qty","dispatch","getState","get","data","console","log","type","payload","product","_id","name","image","price","countInStock","localStorage","setItem","JSON","stringify","cart","cartItems","removeFromCart","saveShippingAddress"],"sources":["C:/Projects/Travasy/proshop/frontend/src/actions/cartActions.js"],"sourcesContent":["import axios from 'axios'\r\nimport { CART_ADD_ITEM, CART_REMOVE_ITEM, CART_SAVE_SHIPPING_ADDRESS } from '../constants/cartConstants'\r\n\r\nconst api = axios.create({\r\n\tbaseURL: \"http://localhost:5000/api/products\",\r\n});\r\n\r\nexport const addToCart = (id, qty) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tconst { data } = await api.get(`/${id}`);\r\n\t\tconsole.log(data)\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: CART_ADD_ITEM,\r\n\t\t\tpayload: {\r\n\t\t\t\tproduct: data._id,\r\n\t\t\t\tname: data.name,\r\n\t\t\t\timage: data.image,\r\n\t\t\t\tprice: data.price,\r\n\t\t\t\tcountInStock: data.countInStock,\r\n\t\t\t\tqty,\r\n\t\t\t},\r\n\t\t})\r\n\t\tlocalStorage.setItem('cartItems', JSON.stringify(getState().cart.cartItems))\r\n\t} catch (error) {\r\n\t\tconsole.log(error)\r\n\t}\r\n\r\n}\r\n\r\nexport const removeFromCart = (id) => (dispatch, getState) => {\r\n\tdispatch({\r\n\t\ttype: CART_REMOVE_ITEM,\r\n\t\tpayload: id,\r\n\t})\r\n\r\n\tlocalStorage.setItem('cartItems', JSON.stringify(getState().cart.cartItems))\r\n}\r\n\r\nexport const saveShippingAddress = (data) => (dispatch) => {\r\n\tdispatch({\r\n\t\ttype: CART_SAVE_SHIPPING_ADDRESS,\r\n\t\tpayload: data,\r\n\t})\r\n\r\n\tlocalStorage.setItem('shippingAddress', JSON.stringify(data))\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"oQAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,aAAT,CAAwBC,gBAAxB,CAA0CC,0BAA1C,KAA4E,4BAA5E,CAEA,GAAMC,IAAG,CAAGJ,KAAK,CAACK,MAAN,CAAa,CACxBC,OAAO,CAAE,oCADe,CAAb,CAAZ,CAIA,MAAO,IAAMC,UAAS,CAAG,QAAZA,UAAY,CAACC,EAAD,CAAKC,GAAL,mGAAa,iBAAOC,QAAP,CAAiBC,QAAjB,kLAEbP,IAAG,CAACQ,GAAJ,YAAYJ,EAAZ,EAFa,qCAE5BK,IAF4B,gBAE5BA,IAF4B,CAGpCC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EAEAH,QAAQ,CAAC,CACRM,IAAI,CAAEf,aADE,CAERgB,OAAO,CAAE,CACRC,OAAO,CAAEL,IAAI,CAACM,GADN,CAERC,IAAI,CAAEP,IAAI,CAACO,IAFH,CAGRC,KAAK,CAAER,IAAI,CAACQ,KAHJ,CAIRC,KAAK,CAAET,IAAI,CAACS,KAJJ,CAKRC,YAAY,CAAEV,IAAI,CAACU,YALX,CAMRd,GAAG,CAAHA,GANQ,CAFD,CAAD,CAAR,CAWAe,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkCC,IAAI,CAACC,SAAL,CAAehB,QAAQ,GAAGiB,IAAX,CAAgBC,SAA/B,CAAlC,EAhBoC,iFAkBpCf,OAAO,CAACC,GAAR,cAlBoC,qEAAb,oEAAlB,CAuBP,MAAO,IAAMe,eAAc,CAAG,QAAjBA,eAAiB,CAACtB,EAAD,QAAQ,UAACE,QAAD,CAAWC,QAAX,CAAwB,CAC7DD,QAAQ,CAAC,CACRM,IAAI,CAAEd,gBADE,CAERe,OAAO,CAAET,EAFD,CAAD,CAAR,CAKAgB,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkCC,IAAI,CAACC,SAAL,CAAehB,QAAQ,GAAGiB,IAAX,CAAgBC,SAA/B,CAAlC,EACA,CAP6B,EAAvB,CASP,MAAO,IAAME,oBAAmB,CAAG,QAAtBA,oBAAsB,CAAClB,IAAD,QAAU,UAACH,QAAD,CAAc,CAC1DA,QAAQ,CAAC,CACRM,IAAI,CAAEb,0BADE,CAERc,OAAO,CAAEJ,IAFD,CAAD,CAAR,CAKAW,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAwCC,IAAI,CAACC,SAAL,CAAed,IAAf,CAAxC,EACA,CAPkC,EAA5B"},"metadata":{},"sourceType":"module"}