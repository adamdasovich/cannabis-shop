{"ast":null,"code":"import _toConsumableArray from\"C:/Projects/Travasy/proshop/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Projects/Travasy/proshop/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{addToCart,removeFromCart}from'../actions/cartActions';import{Link,useParams,useSearchParams,useNavigate}from'react-router-dom';import{Row,Col,ListGroup,Image,Form,Button,Card}from'react-bootstrap';import Message from'../components/Message';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CartScreen=function CartScreen(){var _useParams=useParams(),id=_useParams.id;var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,1),searchParams=_useSearchParams2[0];var qty=Number(searchParams.get('qty'));var navigate=useNavigate();var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;console.log(cartItems);useEffect(function(){if(id){dispatch(addToCart(id,qty));}},[dispatch,id,qty]);var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};var checkoutHandler=function checkoutHandler(){navigate('/login?redirect=shipping');};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{children:[\"Your cart is empty \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back\"})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product);})})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce(function(acc,item){return acc+item.qty;},0),\") items\"]}),\"$\",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2)]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Proceed To Checkout\"})})]})})})]});};export default CartScreen;","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","addToCart","removeFromCart","Link","useParams","useSearchParams","useNavigate","Row","Col","ListGroup","Image","Form","Button","Card","Message","CartScreen","id","searchParams","qty","Number","get","navigate","dispatch","cart","state","cartItems","console","log","removeFromCartHandler","checkoutHandler","length","map","item","image","name","product","price","e","target","value","Array","countInStock","keys","x","reduce","acc","toFixed"],"sources":["C:/Projects/Travasy/proshop/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React, { useEffect, } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { addToCart, removeFromCart } from '../actions/cartActions'\r\nimport { Link, useParams, useSearchParams, useNavigate } from 'react-router-dom'\r\nimport { Row, Col, ListGroup, Image, Form, Button, Card } from 'react-bootstrap'\r\nimport Message from '../components/Message'\r\n\r\n\r\nconst CartScreen = () => {\r\n\tconst { id } = useParams()\r\n\tconst [searchParams] = useSearchParams()\r\n\tconst qty = Number(searchParams.get('qty'))\r\n\tconst navigate = useNavigate()\r\n\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst cart = useSelector((state) => state.cart)\r\n\tconst { cartItems } = cart\r\n\tconsole.log(cartItems)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (id) {\r\n\t\t\tdispatch(addToCart(id, qty))\r\n\t\t}\r\n\t}, [dispatch, id, qty])\r\n\r\n\r\n\tconst removeFromCartHandler = (id) => {\r\n\t\tdispatch(removeFromCart(id))\r\n\t}\r\n\r\n\tconst checkoutHandler = () => {\r\n\t\tnavigate('/login?redirect=shipping')\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Row>\r\n\t\t\t<Col md={8}>\r\n\t\t\t\t<h1>Shopping Cart</h1>\r\n\t\t\t\t{cartItems.length === 0 ? (\r\n\t\t\t\t\t<Message>\r\n\t\t\t\t\t\tYour cart is empty <Link to='/'>Go Back</Link>\r\n\t\t\t\t\t</Message>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<ListGroup variant='flush'>\r\n\t\t\t\t\t\t{cartItems.map((item) => (\r\n\t\t\t\t\t\t\t<ListGroup.Item key={item.product}>\r\n\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t<Col md={2}>\r\n\t\t\t\t\t\t\t\t\t\t<Image src={item.image} alt={item.name} fluid rounded />\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col md={3}>\r\n\t\t\t\t\t\t\t\t\t\t<Link to={`/product/${item.product}`}>{item.name}</Link>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col md={2}>${item.price}</Col>\r\n\t\t\t\t\t\t\t\t\t<Col md={2}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tas='select'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={item.qty}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taddToCart(item.product, Number(e.target.value))\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{[...Array(item.countInStock).keys()].map((x) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<option key={x + 1} value={x + 1}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{x + 1}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Control>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col md={2}>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\t\tvariant='light'\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => removeFromCartHandler(item.product)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-trash'></i>\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</ListGroup>\r\n\t\t\t\t)}\r\n\t\t\t</Col>\r\n\t\t\t<Col md={4}>\r\n\t\t\t\t<Card>\r\n\t\t\t\t\t<ListGroup variant='flush'>\r\n\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t<h2>Subtotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)})\r\n\t\t\t\t\t\t\t\titems\r\n\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t${cartItems.reduce((acc, item) => acc + item.qty * item.price, 0).toFixed(2)}\r\n\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\tclassName='btn-block'\r\n\t\t\t\t\t\t\t\tdisabled={cartItems.length === 0}\r\n\t\t\t\t\t\t\t\tonClick={checkoutHandler}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tProceed To Checkout\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t</ListGroup>\r\n\t\t\t\t</Card>\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t)\r\n}\r\n\r\nexport default CartScreen"],"mappings":"4PAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAkC,OAAlC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,SAAT,CAAoBC,cAApB,KAA0C,wBAA1C,CACA,OAASC,IAAT,CAAeC,SAAf,CAA0BC,eAA1B,CAA2CC,WAA3C,KAA8D,kBAA9D,CACA,OAASC,GAAT,CAAcC,GAAd,CAAmBC,SAAnB,CAA8BC,KAA9B,CAAqCC,IAArC,CAA2CC,MAA3C,CAAmDC,IAAnD,KAA+D,iBAA/D,CACA,MAAOC,QAAP,KAAoB,uBAApB,C,wFAGA,GAAMC,WAAU,CAAG,QAAbA,WAAa,EAAM,CACxB,eAAeX,SAAS,EAAxB,CAAQY,EAAR,YAAQA,EAAR,CACA,qBAAuBX,eAAe,EAAtC,sDAAOY,YAAP,sBACA,GAAMC,IAAG,CAAGC,MAAM,CAACF,YAAY,CAACG,GAAb,CAAiB,KAAjB,CAAD,CAAlB,CACA,GAAMC,SAAQ,CAAGf,WAAW,EAA5B,CAEA,GAAMgB,SAAQ,CAAGvB,WAAW,EAA5B,CAEA,GAAMwB,KAAI,CAAGvB,WAAW,CAAC,SAACwB,KAAD,QAAWA,MAAK,CAACD,IAAjB,EAAD,CAAxB,CACA,GAAQE,UAAR,CAAsBF,IAAtB,CAAQE,SAAR,CACAC,OAAO,CAACC,GAAR,CAAYF,SAAZ,EAEA3B,SAAS,CAAC,UAAM,CACf,GAAIkB,EAAJ,CAAQ,CACPM,QAAQ,CAACrB,SAAS,CAACe,EAAD,CAAKE,GAAL,CAAV,CAAR,CACA,CACD,CAJQ,CAIN,CAACI,QAAD,CAAWN,EAAX,CAAeE,GAAf,CAJM,CAAT,CAOA,GAAMU,sBAAqB,CAAG,QAAxBA,sBAAwB,CAACZ,EAAD,CAAQ,CACrCM,QAAQ,CAACpB,cAAc,CAACc,EAAD,CAAf,CAAR,CACA,CAFD,CAIA,GAAMa,gBAAe,CAAG,QAAlBA,gBAAkB,EAAM,CAC7BR,QAAQ,CAAC,0BAAD,CAAR,CACA,CAFD,CAIA,mBACC,MAAC,GAAD,yBACC,MAAC,GAAD,EAAK,EAAE,CAAE,CAAT,wBACC,qCADD,CAEEI,SAAS,CAACK,MAAV,GAAqB,CAArB,cACA,MAAC,OAAD,+CACoB,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,qBADpB,GADA,cAKA,KAAC,SAAD,EAAW,OAAO,CAAC,OAAnB,UACEL,SAAS,CAACM,GAAV,CAAc,SAACC,IAAD,qBACd,KAAC,SAAD,CAAW,IAAX,wBACC,MAAC,GAAD,yBACC,KAAC,GAAD,EAAK,EAAE,CAAE,CAAT,uBACC,KAAC,KAAD,EAAO,GAAG,CAAEA,IAAI,CAACC,KAAjB,CAAwB,GAAG,CAAED,IAAI,CAACE,IAAlC,CAAwC,KAAK,KAA7C,CAA8C,OAAO,KAArD,EADD,EADD,cAIC,KAAC,GAAD,EAAK,EAAE,CAAE,CAAT,uBACC,KAAC,IAAD,EAAM,EAAE,oBAAcF,IAAI,CAACG,OAAnB,CAAR,UAAuCH,IAAI,CAACE,IAA5C,EADD,EAJD,cAOC,MAAC,GAAD,EAAK,EAAE,CAAE,CAAT,eAAcF,IAAI,CAACI,KAAnB,GAPD,cAQC,KAAC,GAAD,EAAK,EAAE,CAAE,CAAT,uBACC,KAAC,IAAD,CAAM,OAAN,EACC,EAAE,CAAC,QADJ,CAEC,KAAK,CAAEJ,IAAI,CAACd,GAFb,CAGC,QAAQ,CAAE,kBAACmB,CAAD,QACTf,SAAQ,CACPrB,SAAS,CAAC+B,IAAI,CAACG,OAAN,CAAehB,MAAM,CAACkB,CAAC,CAACC,MAAF,CAASC,KAAV,CAArB,CADF,CADC,EAHX,UASE,mBAAIC,KAAK,CAACR,IAAI,CAACS,YAAN,CAAL,CAAyBC,IAAzB,EAAJ,EAAqCX,GAArC,CAAyC,SAACY,CAAD,qBACzC,eAAoB,KAAK,CAAEA,CAAC,CAAG,CAA/B,UACEA,CAAC,CAAG,CADN,EAAaA,CAAC,CAAG,CAAjB,CADyC,EAAzC,CATF,EADD,EARD,cAyBC,KAAC,GAAD,EAAK,EAAE,CAAE,CAAT,uBACC,KAAC,MAAD,EACC,IAAI,CAAC,QADN,CAEC,OAAO,CAAC,OAFT,CAGC,OAAO,CAAE,yBAAMf,sBAAqB,CAACI,IAAI,CAACG,OAAN,CAA3B,EAHV,uBAKC,UAAG,SAAS,CAAC,cAAb,EALD,EADD,EAzBD,GADD,EAAqBH,IAAI,CAACG,OAA1B,CADc,EAAd,CADF,EAPF,GADD,cAmDC,KAAC,GAAD,EAAK,EAAE,CAAE,CAAT,uBACC,KAAC,IAAD,wBACC,MAAC,SAAD,EAAW,OAAO,CAAC,OAAnB,wBACC,MAAC,SAAD,CAAW,IAAX,yBACC,mCAAeV,SAAS,CAACmB,MAAV,CAAiB,SAACC,GAAD,CAAMb,IAAN,QAAea,IAAG,CAAGb,IAAI,CAACd,GAA1B,EAAjB,CAAgD,CAAhD,CAAf,aADD,KAIGO,SAAS,CAACmB,MAAV,CAAiB,SAACC,GAAD,CAAMb,IAAN,QAAea,IAAG,CAAGb,IAAI,CAACd,GAAL,CAAWc,IAAI,CAACI,KAArC,EAAjB,CAA6D,CAA7D,EAAgEU,OAAhE,CAAwE,CAAxE,CAJH,GADD,cAOC,KAAC,SAAD,CAAW,IAAX,wBACC,KAAC,MAAD,EACC,IAAI,CAAC,QADN,CAEC,SAAS,CAAC,WAFX,CAGC,QAAQ,CAAErB,SAAS,CAACK,MAAV,GAAqB,CAHhC,CAIC,OAAO,CAAED,eAJV,iCADD,EAPD,GADD,EADD,EAnDD,GADD,CA4EA,CAvGD,CAyGA,cAAed,WAAf"},"metadata":{},"sourceType":"module"}